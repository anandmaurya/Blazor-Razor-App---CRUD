@page "/"
@inject IJSRuntime JSRuntime
@inject IJSRuntime JS

<PageTitle>Index</PageTitle>

<h3>Employee</h3>
@* <SurveyPrompt Title="How is Blazor working for you?" /> *@

<div class="row mb-2 offset-1">
    <div class="col-md-3">
        <button type="button" class="btn btn-primary" @onclick="ShowModal">ADD New</button>
    </div>
    <div class="col-md-3">
        <button type="button" class="btn btn-secondary">Show selected Row</button>
    </div>
</div>


<div class="container">
    <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <thead>

            <tr>
                <th class="th-sm">
                    @* <input type="checkbox" /> *@
                    <input id="chkSelectAll" type="checkbox" @onclick="SelectAll" />
                </th>
                <th class="th-sm">
                    Name

                </th>
                <th class="th-sm">
                    Department
                </th>
                <th class="th-sm">
                    DOB

                </th>
                <th class="th-sm">
                    Action

                </th>
            </tr>

        </thead>
        <tbody>
            @foreach (var emp in employeeList)
            {
                <tr>
                    <td class="th-sm">
                        <input type="checkbox">
                    </td>
                    <td class="th-sm">
                        <label>@emp.Name</label>
                    </td>
                    <td class="th-sm">
                        <label>@emp.DepartmentName</label>
                    </td>
                    <td class="th-sm">
                        <label>@emp.DOB.ToString("yyyy-MM-dd")</label>
                    </td>
                    <td class="th-sm">
                        <button type="button" class="btn btn-primary">Edit</button>
                        <button type="button" class="btn btn-danger">Delete</button>
                    </td>
                </tr>
            }

        </tbody>

    </table>
</div>


<!-- Modal -->
<div class="modal" tabindex="-1" style="display: @(IsModalOpen ? "block" : "none")">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Employee</h5>
            <button type="button" class="close" @onclick="CloseModal">
            <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
                <div class="container">
                    <form>
                        <div class="row mb-3 offset-1">
                            <label for="name" class="col-sm-2 col-form-label">Name:</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" @bind="@employee.Name" id="name" placeholder="Enter Name">
                                <input type="text" class="form-control" @bind="@SelectedDepartmentId" id="deptID" placeholder="Enter Name">
                            </div>
                        </div>
                        <div class="row mb-3 offset-1">
                            <label for="dob" class="col-sm-2 col-form-label">DOB:</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="dob" @bind="@employee.DOB">
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label for="department" class="col-sm-2 col-form-label">Department:</label>
                            <div class="col-sm-8 offset-1">
                                <select class="form-select" id="department" @bind="@employee.DepartmentID">
                                    <option value="">Select Department</option>
                                    @foreach (var dept in Departments)
                                    {
                                        <option value="@dept.ID">@dept.DepartmentName</option>
                                    }
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label">Gender:</label>
                            <div class="col-sm-8 offset-1">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" id="male" @bind="employee.Gender">
                                    <label class="form-check-label" for="male">Male</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="gender" id="female" @bind="employee.Gender">
                                    <label class="form-check-label" for="female">Female</label>
                                </div>
                            </div>
                        </div>
                        @*  <div class="row mb-3offset-1">
                        <div class="col-sm-10 offset-sm-2">
                        <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                        </div> *@
                    </form>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" @onclick="@CreateEmployee" value="Save">Save</button>
                <button type="button" class="btn btn-secondary" @onclick="CloseModal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    function SelectAll() {
        var checkboxes = document.querySelectorAll('input[type="checkbox"]');
        var selectAllCheckbox = document.getElementById('chkSelectAll');
        for (var i = 0; i < checkboxes.length; i++) {
            checkboxes[i].checked = selectAllCheckbox.checked;
        }
    }
</script>

